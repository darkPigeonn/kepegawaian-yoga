<template name="listReflection">
    <div class="container">
        <h2>Assessment</h2>
        <div class="d-flex justify-content-end mb-2">
            <a href="/assessment/config" class="btn btn-primary mr-2">Konfigurasi Assessment</a>
            <a href="/assessment/create/category" class="btn btn-primary mr-2">Buat Kategori</a>
            <a href="/assessment/create/question" class="btn btn-primary mr-2">Buat Pertanyaan</a>
            <a href="/assessment/create/template" class="btn btn-primary mr-2">Buat Template</a>
        </div>
    </div>
</template>

<template name="configAssessment">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>Konfigurasi Assessment</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="d-flex justify-content-end mb-3">
                    {{#if isOpen}}
                    <button class="btn btn-primary">Buka</button>
                    {{else}}
                    <button class="btn btn-primary">Tutup</button>
                    {{/if}}
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="template">Template</label>
            <select class="form-control" id="template">
                {{#each template}}
                <option value="{{_id}}">{{name}}</option>
                {{/each}}
            </select>
        </div>
    </div>
</template>

<template name="createCategoryAssessment">
    <div class="container">
        <h1>Buat Kategori Assessment</h1>
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Nama Kategori</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each category}}
                    <tr>
                        <td>{{nomorUrut @index}}</td>
                        <td>{{name}}</td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
        <div class="form-group">
            <label for="category">Nama Kategori</label>
            <input type="text" class="form-control" id="category" placeholder="Masukkan nama kategori baru">
        </div>
        <div class="d-flex justify-content-end">
            <button class="btn btn-primary" id="createCategory">Tambah</button>
        </div>
    </div>
</template>

<template name="createQuestionAssessment">
    <div class="container">
        {{#if equals viewMode 1}}
        <h1>Daftar Pertanyaan Assessment</h1>
        <div class="d-flex justify-content-end mb-2">
            <button class="btn btn-primary" id="addQuestion">Tambah Pertanyaan</button>
        </div>
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Pertanyaan</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each question}}
                    <tr>
                        <td>{{nomorUrut @index}}</td>
                        <td style="text-wrap: wrap;">{{content}}</td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
        {{else}}
        <h1>Tambah Pertanyaan Assessment</h1>
        <div class="d-flex justify-content-end mb-2">
            <button class="btn btn-primary" id="backToList">Kembali</button>
        </div>
        <div class="form-group">
            <label for="question">Pertanyaan</label>
            <input type="text" class="form-control" id="question" placeholder="Masukkan pertanyaan">
        </div>
        <div class="d-flex justify-content-end">
            <button class="btn btn-primary" id="saveQuestion">Tambah</button>
        </div>
        {{/if}}
    </div>
</template>

<template name="createTemplateAssessment">
    <div class="container">
        {{#if equals viewMode 1}}
        <h1>Daftar Template Assessment</h1>
        <div class="d-flex justify-content-end mb-2">
            <button class="btn btn-primary" id="addTemplate">Tambah Template</button>
        </div>
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Nama Template</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each template}}
                    <tr>
                        <td>{{nomorUrut @index}}</td>
                        <td>{{name}}</td>
                        <td>
                            <a href="/assessment/edit/template/{{_id}}" class="btn btn-primary">Edit</a>
                            <a href="/assessment/detail/template/{{_id}}" class="btn btn-info">Detail</a>
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
        {{else}}
        <h1>Tambah Template Assessment</h1>
        <div class="d-flex justify-content-end mb-2">
            <button class="btn btn-primary" id="backToList">Kembali</button>
        </div>
        <div class="form-group">
            <label for="">Nama Template</label>
            <input type="text" class="form-control" id="templateName" placeholder="Masukkan nama template">
        </div>
        <div class="form-group">
            <label>Tipe Assessment</label>
            <select class="form-control" id="type">
                <option value="">Pilih Tipe Assessment</option>
                <option value="reflection">Refleksi</option>
                <option value="evaluation">Evaluasi</option>
            </select>
        </div>
        <div class="form-group">
            <label for="">Kategori</label>
            <select class="form-control" id="category">
                <option value="">Pilih Kategori</option>
                {{#each category}}
                <option value="{{_id}}">{{name}}</option>
                {{/each}}
            </select>
        </div>
        <div class="form-group">
            <label for="">Pertanyaan</label>
            <select class="form-control" id="question">
                <option value="">Pilih Pertanyaan</option>
                {{#each question}}
                <option value="{{_id}}">{{content}}</option>
                {{/each}}
            </select>
            <br>
            <button class="btn btn-primary" id="addToTemp">Tambah</button>
        </div>
        <div class="form-group">
            <label>Tipe Jawaban</label>
            <select class="form-control" id="select-answer-type">
                <option value="">Pilih Tipe Jawaban</option>
                <option value="uraian">Uraian</option>
                <option value="pilgan">Pilihan Ganda</option>
            </select>
        </div>
        {{#if isPilgan}}
        <div class="form-group">
            <label>Jawaban</label>
            <input type="text" class="form-control" id="answer" placeholder="Masukkan jawaban">
            <button class="btn btn-primary" id="addAnswer">Tambah</button>
        </div>
        <div>
            <h5>Daftar Pilihan Jawaban:</h5>
            <ul>
                {{#each answers}}
                <li>{{this}}</li>
                {{/each}}
            </ul>
        </div>
        {{/if}}


        <!-- Tampilkan tabel berdasarkan kategori -->
        {{#each i in temp}}
        <h3>{{i.categoryName}}</h3> <!-- Menampilkan nama kategori -->
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Pertanyaan</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each i.questions}}
                    <tr>
                        <td>{{nomorUrut @index}}</td> <!-- Urutan pertanyaan, jika diperlukan -->
                        <td>{{questionText}}</td> <!-- Teks pertanyaan -->
                        <td>
                            <button class="btn btn-danger" milik="{{questionId}}" categoryId="{{i.categoryId}}"
                                id="btn-delete">Hapus</button>
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
        {{/each}}
        <div class="d-flex justify-content-end">
            <button class="btn btn-primary" id="saveTemplate">Simpan</button>
        </div>
        {{/if}}
    </div>
</template>

<template name="editTemplateAssessment">
    <div class="container">
        <h1>Ubah Template Assessment</h1>
        <div class="form-group">
            <label for="">Nama Template</label>
            <input type="text" class="form-control" id="templateName" placeholder="Masukkan nama template"
                value="{{template.name}}">
        </div>
        <div class="form-group">
            <label for="">Kategori</label>
            <select class="form-control" id="category">
                {{#each category}}
                <option value="{{_id}}">{{name}}</option>
                {{/each}}
            </select>
        </div>
        <div class="form-group">
            <label for="">Pertanyaan</label>
            <select class="form-control" id="question">
                {{#each question}}
                <option value="{{_id}}">{{content}}</option>
                {{/each}}
            </select>
            <br>
            <button class="btn btn-primary" id="addToTemp">Tambah</button>
        </div>

        <!-- Tampilkan tabel berdasarkan kategori -->
        {{#each i in temp}}
        <h3>{{i.categoryName}}</h3> <!-- Menampilkan nama kategori -->
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Pertanyaan</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each i.questions}}
                    <tr>
                        <td>{{nomorUrut @index}}</td> <!-- Urutan pertanyaan, jika diperlukan -->
                        <td>{{questionText}}</td> <!-- Teks pertanyaan -->
                        <td>
                            <button class="btn btn-danger" milik="{{questionId}}" categoryId="{{i.categoryId}}"
                                id="btn-delete">Hapus</button>
                        </td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
        {{/each}}
        <div class="d-flex justify-content-end">
            <button class="btn btn-primary" id="saveTemplate">Simpan</button>
        </div>
    </div>
</template>

<template name="detailTemplateAssessment">
    <div class="container mt-4">
        <h2>Detail Template assessment</h2>
        <div class="card mb-4">
            <div class="card-body">
                <h3 class="card-title">{{template.name}}</h3>
                <p class="card-text"><strong>Created by:</strong> {{template.createdByName}}</p>
                <p class="card-text"><strong>Created at:</strong> {{formatHRDate template.createdAt}}</p>
            </div>
        </div>

        {{#each template.questions}}
        <div class="card mb-3">
            <div class="card-header">
                <h4>{{categoryName}}</h4>
            </div>
            <div class="card-body">
                <ol>
                    {{#each questions}}
                    <li>{{questionText}}</li>
                    {{/each}}
                </ol>
            </div>
        </div>
        {{/each}}

        <div class="mt-4">
            <a href="/assessment/edit/template/{{template._id}}" class="btn btn-primary">Ubah Template</a>
            <a href="/assessment/create/template" class="btn btn-secondary ml-2">Kembali</a>
        </div>
    </div>
</template>
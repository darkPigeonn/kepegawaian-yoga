<template name="projects_page">
    <div class="desktop-div pb-3">
        <div class="box mt-4 mb-3">
            <div class="content">
                <div class="contentAtas">
                    <label style="color: blue; margin: 0;"> 
                        <a href="/projects"> 
                            Proyek
                        </a> 
                        /
                    </label>
                    <div class="d-flex justify-content-between align-middle mt-2 mb-2">
                        <div class="my-auto">
                            <label class="mb-1" style="font-size: 32px; font-weight: bold;">Semua Proyek</label>
                            <div>
                                <label style="font-size: 17px;">Menampilkan {{projects.length}} hasil</label>
                            </div>
                        </div>
                        <div class="d-flex gap-2 my-auto">
                            <button class="btn btn-sm btn-primary btn-filter" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel-fill" viewBox="0 0 16 16">
                                    <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5z"/>
                                </svg>
                            </button>
                            <a href="/projects/create" class="btn btn-primary">+ Tambah Proyek</a>
                        </div>
                    </div>
                    {{#if equals filterMode '2'}}
                        <hr class="mt-1 mb-2" style="border: 1px solid lightgray;">
                        <div class="d-flex justify-content-between mt-3 my-auto pb-0">
                            <label class="fs-5 fw-bold">
                                Filter
                            </label>
                        </div>
                        <div class="d-flex gap-2 mb-3">
                            <select id="input_type" class="form-select filter">
                                <option value="nama_project">Nama Proyek</option>
                                <option value="status">Status</option>
                                <option value="tanggal_mulai">Tanggal Mulai</option>
                                <option value="tanggal_selesai">Tanggal Selesai</option>
                                <option value="jumlah_member">Jumlah Member</option>
                            </select>
                            <input type="text" id="input_data" class="form-control filter" placeholder="Cari Proyek" />
                        </div>
                    {{/if}}
                </div>
                <div class="containerContent">
                    <div class="row row-cols-3 mt-1">
                        {{#each projects}}
                            <div class="col mb-3">
                                <div class="task-card" style="box-shadow: rgba(0, 0, 0, 0.09) 0px 3px 12px; display: flex; flex-direction: column; justify-content: space-between;">
                                    <div class="taskContent">
                                        <div class="row row-cols-2">
                                            <div class="col">
                                                <h5 class="fw-bold w-100 overflow-hidden text-overflow-ellipsis no-wrap content-title" style="font-size: 14pt;">{{nama_project}}</h5>
                                                <p class="text-secondary fw-light limited-text word-break mb-0" style="font-size: 11pt;">
                                                    {{toHTML deskripsi}}
                                                </p>
                                            </div>
                                            <div class="col d-flex justify-content-end align-middle flex-wrap gap-1">
                                                <div class="status">
                                                    {{#if equals status "active"}}
                                                        <span class="rounded-4 px-2 py-1" style="font-size: 10pt; color: #4caf50;background-color: #e8f5e9;">
                                                            Active
                                                        </span>
                                                    {{/if}}
                                                    {{#if equals status "completed"}}
                                                        <span class="rounded-4 px-2 py-1" style="font-size: 10pt; color: #2196f3;background-color: #e3f2fd;">
                                                            Completed
                                                        </span>
                                                    {{/if}}
                                                    {{#if equals status "on-hold"}}
                                                        <span class="rounded-4 px-2 py-1" style="font-size: 10pt; color: #ff5722;background-color: #ffe0b2;">
                                                            On-Hold
                                                        </span>
                                                    {{/if}}
                                                </div>
                                                <div class="members">
                                                    <span class="rounded-4 px-2 py-1" style="font-size: 9pt; color: #ffc14d;background-color: #ffeccb;">
                                                        {{members.length}} Member
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between mt-2" style="position: relative; bottom: 0;">
                                        <div class="d-flex flex-wrap gap-1">
                                            <div class="time">
                                                <span class="rounded-3 px-2 py-1" style="font-size: 11pt; color: #6cc2ff;background-color: #d1edff;max-width: fit-content;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" fill="black" class="bi bi-play-fill" viewBox="0 0 16 20">
                                                        <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                                                    </svg>
                                                    {{formatHRDateShort tanggal_mulai}}
                                                </span>
                                            </div>
                                            -
                                            <div class="time">
                                                <span class="rounded-3 px-2 py-1" style="font-size: 11pt; color: #6cc2ff;background-color: #d1edff; max-width: fit-content;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-alarm" viewBox="0 0 16 20">
                                                        <path d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9z"/>
                                                        <path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1zm1.038 3.018a6 6 0 0 1 .924 0 6 6 0 1 1-.924 0M0 3.5c0 .753.333 1.429.86 1.887A8.04 8.04 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5M13.5 1c-.753 0-1.429.333-1.887.86a8.04 8.04 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1"/>
                                                    </svg>
                                                    {{formatHRDateShort tanggal_selesai}}
                                                </span>
                                            </div>
                                        </div>
                                        <a href="/projects/detail/{{_id}}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrow-right-circle-fill" viewBox="0 0 16 16">
                                                <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {{/each}}
                    </div>
                </div>
            </div>
        </div> 
    </div>
    <div class="mobile-div pb-3">
        <div class="box mt-4 mb-3">
            <div class="content">
                <div class="contentAtas">
                    <label style="color: blue; margin: 0;"> 
                        <a href="/projects"> 
                            Proyek
                        </a> 
                        /
                    </label>
                    <div class="d-flex justify-content-between align-middle mt-2 mb-2">
                        <div class="my-auto w-50">
                            <label class="mb-1" style="font-size: 28px; font-weight: bold;">Semua Proyek</label>
                            <div>
                                <label style="font-size: 15px;">Menampilkan {{projects.length}} hasil</label>
                            </div>
                        </div>
                        <div class="d-flex container-filter flex-wrap align-items-end gap-2 my-auto w-50">
                            <button class="btn btn-sm btn-primary btn-filter" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel-fill" viewBox="0 0 16 16">
                                    <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5z"/>
                                </svg>
                            </button>
                            <a href="/projects/create" class="btn btn-sm btn-primary">+ Tambah Proyek</a>
                        </div>
                    </div>
                    {{#if equals filterMode '2'}}
                        <hr class="mt-1 mb-2" style="border: 1px solid lightgray;">
                        <div class="d-flex justify-content-between mt-3 my-auto pb-0">
                            <label class="fs-6 fw-bold">
                                Filter
                            </label>
                        </div>
                        <div class="d-flex flex-wrap gap-2 mb-3">
                            <select id="input_type" class="form-select filter">
                                <option value="nama_project">Nama Proyek</option>
                                <option value="status">Status</option>
                                <option value="tanggal_mulai">Tanggal Mulai</option>
                                <option value="tanggal_selesai">Tanggal Selesai</option>
                                <option value="jumlah_member">Jumlah Member</option>
                            </select>
                            <input type="text" id="input_data" class="form-control filter" placeholder="Cari Proyek" />
                        </div>
                    {{/if}}
                </div>
                <div class="containerContent">
                    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 mt-1">
                        {{#each projects}}
                            <div class="col mb-3">
                                <div class="task-card" style="box-shadow: rgba(0, 0, 0, 0.09) 0px 3px 12px; display: flex; flex-direction: column; justify-content: space-between;">
                                    <div class="taskContent">
                                        <div class="row row-cols-2">
                                            <div class="col flex-wrap">
                                                <h5 class="fw-bold w-100 overflow-hidden text-overflow-ellipsis no-wrap text-title">{{nama_project}}</h5>
                                                <p class="text-secondary fw-light limited-text word-break text-desc mb-0">
                                                    {{toHTML deskripsi}}
                                                </p>
                                            </div>
                                            <div class="col d-flex flex-column align-items-end">
                                                <div class="status">
                                                    {{#if equals status "active"}}
                                                        <span class="rounded-4 px-2 py-1" style="color: #4caf50;background-color: #e8f5e9;">
                                                            Active
                                                        </span>
                                                    {{/if}}
                                                    {{#if equals status "completed"}}
                                                        <span class="rounded-4 px-2 py-1" style="color: #2196f3;background-color: #e3f2fd;">
                                                            Completed
                                                        </span>
                                                    {{/if}}
                                                    {{#if equals status "on-hold"}}
                                                        <span class="rounded-4 px-2 py-1" style="color: #ff5722;background-color: #ffe0b2;">
                                                            On-Hold
                                                        </span>
                                                    {{/if}}
                                                </div>
                                                <div class="members mt-2">
                                                    <span class="rounded-4 px-2 py-1" style="color: #ffc14d;background-color: #ffeccb;">
                                                        {{members.length}} Member
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between mt-2" style="position: relative; bottom: 0;">
                                        <div class="container-time d-flex flex-wrap gap-2 my-auto">
                                            <div class="time">
                                                <span class="rounded-3 px-2 py-1" style="color: #6cc2ff;background-color: #d1edff;max-width: fit-content;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" fill="black" class="bi bi-play-fill" viewBox="0 0 16 20">
                                                        <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                                                    </svg>
                                                    {{formatHRDateShort tanggal_mulai}}
                                                </span>
                                            </div>
                                            <div class="time">
                                                <span class="rounded-3 px-2 py-1" style="color: #6cc2ff;background-color: #d1edff; max-width: fit-content;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-alarm" viewBox="0 0 16 20">
                                                        <path d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9z"/>
                                                        <path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1zm1.038 3.018a6 6 0 0 1 .924 0 6 6 0 1 1-.924 0M0 3.5c0 .753.333 1.429.86 1.887A8.04 8.04 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5M13.5 1c-.753 0-1.429.333-1.887.86a8.04 8.04 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1"/>
                                                    </svg>
                                                    {{formatHRDateShort tanggal_selesai}}
                                                </span>
                                            </div>
                                        </div>
                                        <a href="/projects/detail/{{_id}}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrow-right-circle-fill" viewBox="0 0 16 16">
                                                <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {{/each}}
                    </div>
                </div>
            </div>
        </div> 
    </div>
    
    <style>
        .mobile-div{
            display: none;
        }

        .desktop-div{
            display: block;
        }

        .isiPersonalData>table>tr>td:nth-child(1) {
            width: 150px;
        }

        .box {
            width: 100%;
            height: 85vh;
            display: flex;
            margin: auto;
            border-radius: 15px;
            background-color: white;
            box-shadow:  25px 25px 40px #a6a6a6,
             -25px -25px 40px #ffffff;
            font-family:system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            border: 1px solid rgb(189, 189, 189);
        }

        .sidebar {
            width: 100%;
            height: 100%;
            flex: 1;
            border-right: 1px solid black;
        }

        .content {
            width: 100%;
            height: 100%;
            flex: 4;
            display: flex;
            flex-direction: column;
            border-radius: 15px 15px 0px 0px;
        }

        .bagianAvatar {
            width: 100%;
            height: 250px;
        }

        .bagianItems>ul {
            margin: 0;
            padding: 0;
        }

        .bagianItems>ul>li {
            list-style-type: none;
            /* border: 1px solid black; */
            border: none;
            padding: 5px;
            margin: 5px;
        }

        .active>i {
            color: blue;
        }

        .active {
            font-weight: bold;
            background-color: beige;
            border-radius: 10px;
        }

        .contentAtas {
            padding-left: 1rem;
            padding-top: 1rem;
            padding-right: 1rem;
            padding-bottom: 0.1rem;
            border-radius: 15px 15px 0px 0px;
            background-color: white;
        }

        .contentAtas>ul {
            margin: 0;
            padding: 0;
        }

        .contentAtas>ul>li {
            list-style-type: none;
            display: inline;
            margin-right: 15px;
        }

        .contentBawah {
            height: 100%;
            background-color: white;
            padding: 1rem;
            overflow: auto;
            flex: 1;
        }

        .contentBawah-1 {
            height: auto;
            background-color: white;
            padding: 1rem;
            overflow: auto;
            flex: 1;
        }

        .containerContent {
            width: 100%;
            height: auto;
            overflow-y: auto;
            background-color: #EFEFEF;
            border-radius: 0px 0px 15px 15px;
            flex: 1;
            padding: 1rem;
        }

        .task-card{
            width: 100%;
            height: 98%;
            background-color: white;
            border-radius: 15px;
            padding: 1.2rem;
        }

        .limited-text {
            max-width: 98%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .personalData {
            width: 100%;
            height: 100%;
            background-color: white;
        }

        .tulisanPersonalData {
            width: 20vw;
            height: 100%;
            background-color: white;
        }

        @media (max-width: 1024px) {
            .desktop-div {
                display: none;
            }
            .mobile-div {
                display: block;
            }
            .box {
                flex-direction: column;
                height: auto;
            }
            .left-header-content, 
            .right-header-content {
                width: 50% !important;
            }
            .time{
                font-size: 10pt !important;
            }
            .status,
            .members{
                font-size: 10pt;
                width: fit-content;
            }
            .container-filter{
                justify-content: flex-end;
            }
        }

        @media (max-width: 768px) {
            .box {
                flex-direction: column;
                height: auto;
            }

            .sidebar {
                border-right: none;
            }

            .content {
                flex: none;
            }

            .contentAtas,
            .contentBawah,
            .contentBawah-1 {
                height: auto;
            }

            .bagianAvatar {
                height: auto;
            }

            .bagianItems {
                display: none; /* Hide the sidebar items on small screens */
            }

            .tulisanPersonalData {
                width: 100%;
            }

            .left-header-content, 
            .right-header-content {
                width: 50% !important;
            }
            .time{
                font-size: 9pt !important;
            }
            .status,
            .members{
                font-size: 9pt;
                width: fit-content;
            }
            .container-filter{
                justify-content: flex-end;
            }
        }

        @media only screen and (max-width: 600px) {
            .desktop-div {
                display: none;
            }
            .mobile-div {
                display: block;
            }
            .box {
                flex-direction: column;
                height: auto;
            }
            .left-header-content, 
            .right-header-content {
                width: 50% !important;
            }
            .text-title{
                font-size: 12pt;
            }
            .text-desc{
                font-size: 9pt;
            }
            .time{
                font-size: 9pt !important;
            }
            .status,
            .members{
                font-size: 8pt;
                width: fit-content;
            }
            .container-filter{
                flex-direction: column;
            }
        }
    </style>

    <style scoped>
        html,
        body {
            background-color: #F1F4F7;
            height: 100%;
            width: 100%;
        }
    </style>
</template>

<template name="projects_create">
    <div class="container mt-3 mb-4">
        <label style="color: blue; margin: 0;"> 
            <a href="/projects" class="text-secondary"> 
                Proyek
            </a> 
            /
            <a href="/projects/create">
                Tambah
            </a>
        </label>
        <div class="title-page mt-3">
            <h3>Tambah Proyek Baru</h3>
        </div>

        <hr class="my-3" style="border: 1px solid lightgray;">
        
        <div class="{{#if equals viewMode '1'}}{{else}}d-none{{/if}} mt-2">
            <form>
                <div class="form-group mb-3">
                    <label class="fw-bold">Nama Proyek</label>
                    <input type="text" id="nama_project" class="form-control" required/>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Deskripsi</label>
                    <div id="toolbar-container-deskripsi"></div>
                    <div id="editor-deskripsi" class="ckeditor-content"></div>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Tanggal Mulai</label>
                    <input type="date" id="tanggal_mulai" class="form-control" required/>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Tanggal Selesai</label>
                    <input type="date" id="tanggal_selesai" class="form-control" required/>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Status Proyek</label>
                    <select name="select-status" class="select2 form-control" id="select-status" required>
                        <option value="active">Aktif</option>
                        <option value="completed">Selesai</option>
                        <option value="on-hold">On-Hold</option>
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Member Proyek</label>
                    <select name="select-member" class="select2 form-control" id="select-member" required multiple>
                        {{#each employee}}
                            <option value="{{ _id }}"><b>{{ full_name }}</b> - {{ department_unit }}</option>
                        {{/each}}
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Objektif Proyek</label>
                    <input type="text" id="objektif_proyek" class="form-control" required/>
                    <br>
                    <button class="btn btn-primary" id="btn_tambah_objektif">Tambah Objektif</button>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Pilih Objektif Proyek Untuk Dibuat Target Capaian</label>
                    <select id="choose_objective" class="form-select">
                        {{#each objective}}
                            <option value="{{id}}">{{name}}</option>
                        {{/each}}
                    </select>
                    <br>
                    <label class="fw-bold">Input Target Capaian</label>
                    <input type="text" id="milestone_proyek" class="form-control" required/>
                    <br>
                    <label class="fw-bold">Estimasi Tanggal Pencapaian Target</label>
                    <input type="date" id="milestone_deadline" class="form-control">
                    <br>
                    <button class="btn btn-primary" id="btn_save_milestone">Simpan Target Capaian</button>
                </div>
                <div>
                    <h2>Daftar Objektif dan Target Capaian</h2>
                    {{#each objective}}
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h3 class="mb-0">{{nomorUrut @index}}. {{name}}</h3>
                            <button class="btn btn-danger btn_delete_objective" milikObjective={{id}}>
                                <i class="fas fa-trash-can btn_delete_objective" milikObjective={{id}}></i>
                            </button>
                        </div>

                        <table class="table table-striped mb-4">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>Target Capaian</th>
                                    <th>Tanggal Target</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each milestone}}
                                    <tr>
                                        <td>{{nomorUrut @index}}</td>
                                        <td>{{name}}</td>
                                        <td>{{formatHRDate deadline}}</td>
                                        <td>
                                            <button class="btn btn-danger btn_delete_milestone" milikMilestone={{idMilestone}} milikObjective={{../id}}>
                                                <i class="fas fa-trash-can btn_delete_milestone" milikMilestone={{idMilestone}} milikObjective={{../id}}></i>
                                            </button>
                                        </td>
                                    </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    {{/each}}
                </div>
                <div class="d-grid gap-2 my-3">
                    <button class="btn btn-primary" type="submit" id="btn_save">Simpan</button>
                </div>
            </form>
        </div>
    </div>
</template>

<template name="projects_edit">
    <div class="container">
        <label style="color: blue; margin: 0;"> 
            <a href="/projects" class="text-secondary"> 
                Proyek
            </a> 
            /
            <a href="/projects/detail/{{projects._id}}" style="max-width: 200px; overflow: hidden; text-overflow: ellipsis;">
                {{capitalizeWord projects.nama_project}}
            </a>
            /
            <a href="/projects/edit/{{projects._id}}">
                Ubah
            </a>
        </label>
        <div class="title-page mt-3">
            <h3>Ubah Proyek</h3>
        </div>
        <hr class="my-3" style="border: 1px solid lightgray;">
        <div class="mt-2">
            <form>
                <div class="form-group mb-3">
                    <label class="fw-bold">Nama Proyek</label>
                    <input type="text" id="nama_project" class="form-control" value="{{projects.nama_project}}" required/>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Deskripsi</label>
                    <div id="toolbar-container-deskripsi"></div>
                    <div id="editor-deskripsi" class="ckeditor-content"></div>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Tanggal Mulai</label>
                    <input type="date" id="tanggal_mulai" class="form-control" value="{{dateToHTML projects.tanggal_mulai}}" required/>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Tanggal Selesai</label>
                    <input type="date" id="tanggal_selesai" class="form-control" value="{{dateToHTML projects.tanggal_selesai}}" required/>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Status Proyek</label>
                    <select name="select-status" class="select2 form-control" id="select-status" value="{{projects.status}}" required>
                        <option value="active" selected="{{#if equals projects.status 'active'}}selected{{/if}}">Aktif</option>
                        <option value="completed" selected="{{#if equals projects.status 'completed'}}selected{{/if}}">Selesai</option>
                        <option value="on-hold" selected="{{#if equals projects.status 'on-hold'}}selected{{/if}}">On-Hold</option>
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Member Proyek</label>
                    <select name="select-member" class="select2 form-control" id="select-member" required multiple>
                        {{#each employee}}
                            {{#if isInProjectMembers _id}}
                                <option value="{{ _id }}" selected>
                                    <b>{{ full_name }}</b> - {{ department_unit }}
                                </option>
                            {{else}}
                                <option value="{{ _id }}">
                                    <b>{{ full_name }}</b> - {{ department_unit }}
                                </option>
                            {{/if}}
                        {{/each}}
                    </select>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Objektif Proyek</label>
                    <input type="text" id="objektif_proyek" class="form-control" required/>
                    <br>
                    <button class="btn btn-primary" id="btn_tambah_objektif">Tambah Objektif</button>
                </div>
                <div class="form-group mb-3">
                    <label class="fw-bold">Pilih Objektif Proyek Untuk Dibuat Target Capaian</label>
                    <select id="choose_objective" class="form-select">
                        {{#each objective}}
                            <option value="{{id}}">{{description}}</option>
                        {{/each}}
                    </select>
                    <br>
                    <label class="fw-bold">Input Target Capaian</label>
                    <input type="text" id="milestone_proyek" class="form-control" required/>
                    <br>
                    <label class="fw-bold">Estimasi Tanggal Pencapaian Target</label>
                    <input type="date" id="milestone_deadline" class="form-control">
                    <br>
                    <button class="btn btn-primary" id="btn_save_milestone">Simpan Target Capaian</button>
                </div>
                <div>
                    <h2>Daftar Objektif dan Target Capaian</h2>
                    {{#each objective}}
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h3 class="mb-0">{{nomorUrut @index}}. {{description}}</h3>
                            <button class="btn btn-danger btn_delete_objective" milikObjective={{id}}>
                                <i class="fas fa-trash-can btn_delete_objective" milikObjective={{id}}></i>
                            </button>
                        </div>

                        <table class="table table-striped mb-4">
                            <thead>
                                <tr>
                                    <th>No</th>
                                    <th>Target Capaian</th>
                                    <th>Tanggal Target</th>
                                    <th>Aksi</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each milestone}}
                                    <tr>
                                        <td>{{nomorUrut @index}}</td>
                                        <td>{{description}}</td>
                                        <td>{{formatHRDate deadline}}</td>
                                        <td>
                                            <button class="btn btn-danger btn_delete_milestone" milikMilestone={{idMilestone}} milikObjective={{../id}}>
                                                <i class="fas fa-trash-can btn_delete_milestone" milikMilestone={{idMilestone}} milikObjective={{../id}}></i>
                                            </button>
                                        </td>
                                    </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    {{/each}}
                </div>
                <div class="d-grid gap-2 my-3">
                    <button class="btn btn-primary" type="submit" id="btn_save">Simpan</button>
                </div>
            </form>
        </div>
    </div>
    <style>
        .project-link{
            max-width: 400px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        @media (max-width: 820px) {
            .desktop-div{
                width: 91%;
            }
            .project-link{
                max-width: 600px; 
                overflow: hidden;
                text-overflow: ellipsis;
            }
        }
        @media only screen and (max-width: 600px) {
            .project-link{
                max-width: 320px;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        }
        @media only screen and (max-width: 375px) {
            .project-link{
                max-width: 250px;
                overflow: hidden;
                text-overflow: ellipsis;
            }
        }
    </style>
</template>

<template name="projects_detail">
    <div class="desktop-div pb-3">
        <div class="box mt-4">
            <div class="content">
                <div class="contentAtas">
                    <label style="color: blue; margin: 0;"> 
                        <a href="/projects" class="text-secondary">
                            Proyek
                        </a> 
                        / 
                        <a href="/projects/detail/{{projects._id}}">
                            {{projects.nama_project}}
                        </a>
                    </label>
                    <div class="d-flex justify-content-between align-middle mt-2">
                        <div class="d-flex gap-3">
                            <label style="font-size: 32px; font-weight: bold;">{{projects.nama_project}}</label>
                            {{#if equals thisUser._id projects.id_leader}}
                                <div class="my-auto">
                                    <a href="/projects/edit/{{projects._id}}">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                            <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                            <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
                                        </svg>
                                    </a>
                                </div>
                            {{/if}}
                        </div>
                        <div class="my-auto">
                            <div class="d-flex justify-content-end gap-2">                                
                                <div class="status">
                                    {{#if equals projects.status "active"}}
                                        <span class="rounded-4 px-2 py-1" style="color: #4caf50;background-color: #e8f5e9;">
                                            Active
                                        </span>
                                    {{/if}}
                                    {{#if equals projects.status "completed"}}
                                        <span class="rounded-4 px-2 py-1" style="color: #2196f3;background-color: #e3f2fd;">
                                            Completed
                                        </span>
                                    {{/if}}
                                    {{#if equals projects.status "on-hold"}}
                                        <span class="rounded-4 px-2 py-1" style="color: #ff5722;background-color: #ffe0b2;">
                                            On-Hold
                                        </span>
                                    {{/if}}
                                </div>
                                <div class="members">
                                    <a href="/projects/detail/{{projects._id}}/members" class="on-hover">
                                        <span class="rounded-4 px-2 py-1" style="color: #ffc14d;background-color: #ffeccb;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-eye" viewBox="0 0 16 20">
                                                <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
                                                <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
                                            </svg>
                                            {{projects.members.length}} Member
                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="d-flex gap-2 mt-3">
                                <div class="time">
                                    <span class="rounded-3 px-2 py-1" style="color: #6cc2ff;background-color: #d1edff;max-width: fit-content;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" fill="black" class="bi bi-play-fill" viewBox="0 0 18 20">
                                            <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                                        </svg>
                                        {{formatHRDateShort projects.tanggal_mulai}}
                                    </span>
                                </div>
                                -
                                <div class="time">
                                    <span class="rounded-3 px-2 py-1" style="color: #6cc2ff;background-color: #d1edff; max-width: fit-content;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-alarm" viewBox="0 0 20 20">
                                            <path d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9z"/>
                                            <path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1zm1.038 3.018a6 6 0 0 1 .924 0 6 6 0 1 1-.924 0M0 3.5c0 .753.333 1.429.86 1.887A8.04 8.04 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5M13.5 1c-.753 0-1.429.333-1.887.86a8.04 8.04 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1"/>
                                        </svg>
                                        {{formatHRDateShort projects.tanggal_selesai}}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="description-container mt-3">
                        <label class="text-secondary fw-normal" style="font-size: 16px;">{{toHTML projects.deskripsi}}</label>
                    </div>
                    <hr class="mt-1 mb-2" style="border: 1px solid lightgray;">
                    <div class="d-flex {{#if equals filterMode '1'}} justify-content-end {{else}} justify-content-between {{/if}} mb-2">
                        {{#if equals filterMode '2'}}
                            <div class="my-auto py-auto align-middle">
                                <label class="fs-5 fw-bold pt-1">
                                    Filter
                                </label>
                            </div>
                        {{/if}}
                        <div class="d-flex justify-content-end gap-2 mt-2 my-auto">
                            <button class="btn btn-sm btn-primary btn-filter" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel-fill" viewBox="0 0 16 16">
                                    <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5z"/>
                                </svg>
                            </button>
    
                            <div class="my-auto">
                                <a href="/tasks/create/{{projects._id}}" class="btn btn-primary">+ Tambah Tugas</a>
                            </div>
                        </div>
                    </div>
                    {{#if equals filterMode '2'}}
                        <div class="d-flex gap-2 mt-2 mb-2">
                            <select id="input_type" class="form-select filter">
                                <option value="nama_task">Nama Tugas</option>
                                <option value="priority">Tingkat Prioritas</option>
                                <option value="deadline">Tenggat Waktu (Sisa Hari)</option>
                            </select>
                            <input type="text" id="input_data" class="form-control filter" placeholder="Cari Tugas" />
                        </div>
                    {{/if}}
                </div>
                <!-- Content -->
                <div class="containerContent">
                    <div class="row row-cols-3 mt-1">
                        {{#each task in tasks}}
                            <div class="col mb-3">
                                <div class="task-card" style="box-shadow: rgba(0, 0, 0, 0.09) 0px 3px 12px; display: flex; flex-direction: column; justify-content: space-between;">
                                    <div class="taskContent">
                                        <div class="row row-cols-2">
                                            <div class="col">
                                                <h5 class="fw-bold w-100 overflow-hidden text-overflow-ellipsis no-wrap content-title" style="font-size: 14pt;">{{task.nama_task}}</h5>
                                                <p class="text-secondary fw-light limited-text word-break mb-0" style="font-size: 11pt;">
                                                    {{toHTML task.deskripsi}}
                                                </p>
                                            </div>
                                            <div class="col d-flex justify-content-end align-middle gap-1">
                                                <div class="status">
                                                    {{#if equals task.priority "high"}}
                                                        <span class="rounded-4 px-2 py-1" style="font-size: 10pt; color: #f2709c;background-color: #fde2e4;">
                                                            {{capitalizeWord task.priority}}
                                                        </span>
                                                    {{/if}}
                                                    {{#if equals task.priority "mid"}}
                                                        <span class="rounded-4 px-2 py-1" style="font-size: 10pt; color: #4c90d1;background-color: #c8e2f4;">
                                                            {{capitalizeWord task.priority}}
                                                        </span>
                                                    {{/if}}
                                                    {{#if equals task.priority "low"}}
                                                        <span class="rounded-4 px-2 py-1" style="font-size: 10pt; color: #79c879;background-color: #e5f2e5;">
                                                            {{capitalizeWord task.priority}}
                                                        </span>
                                                    {{/if}}
                                                </div>
                                                <div class="members">
                                                    <span class="rounded-4 px-2 py-1" style="font-size: 9pt; color: #ffc14d;background-color: #ffeccb;">
                                                        {{task.members.length}} Member
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between mt-2" style="position: relative; bottom: 0;">
                                        <div class="d-flex gap-1">
                                            <div class="time">
                                                <span class="rounded-3 px-2 py-1" style="font-size: 11pt; color: #6cc2ff;background-color: #d1edff; max-width: fit-content;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-alarm" viewBox="0 0 20 20">
                                                        <path d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9z"/>
                                                        <path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1zm1.038 3.018a6 6 0 0 1 .924 0 6 6 0 1 1-.924 0M0 3.5c0 .753.333 1.429.86 1.887A8.04 8.04 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5M13.5 1c-.753 0-1.429.333-1.887.86a8.04 8.04 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1"/>
                                                    </svg>
                                                    <b>Dalam {{daysDifference task.deadline}} hari</b> / {{formatHRDateShort task.deadline}}
                                                </span>
                                            </div>
                                        </div>
                                        <a href="/tasks/detail/{{task._id}}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrow-right-circle-fill" viewBox="0 0 16 16">
                                                <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {{/each}}
                    </div>
                </div>
            </div>
        </div> 
    </div>

    <div class="mobile-div pb-3">
        <div class="box mt-3">
            <div class="content">
                <div class="contentAtas">
                    <label style="color: blue; margin: 0;"> 
                        <a href="/projects" class="text-secondary">
                            Proyek
                        </a> 
                        / 
                        <a href="/projects/detail/{{projects._id}}">
                            {{projects.nama_project}}
                        </a>
                    </label>
                    <div class="d-flex justify-content-between align-middle mt-2">
                        <div>
                            <div class="d-none d-md-block">
                                <div class="d-flex gap-3">
                                    <label class="text-title fw-bold">{{projects.nama_project}}</label>
                                    <div class="my-auto">
                                        <a href="/projects/edit/{{projects._id}}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="d-block d-md-none">
                                <div class="row row-cols-1">
                                    <div class="col">
                                        <label class="text-title fw-bold">{{projects.nama_project}}</label>
                                    </div>
                                    <div class="col my-auto">
                                        <a href="/projects/edit/{{projects._id}}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/>
                                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="my-auto">
                            <div class="container-label d-flex align-items-end flex-wrap gap-2">                                
                                <div class="status">
                                    {{#if equals projects.status "active"}}
                                        <span class="rounded-4 px-2 py-1" style="color: #4caf50;background-color: #e8f5e9;">
                                            Active
                                        </span>
                                    {{/if}}
                                    {{#if equals projects.status "completed"}}
                                        <span class="rounded-4 px-2 py-1" style="color: #2196f3;background-color: #e3f2fd;">
                                            Completed
                                        </span>
                                    {{/if}}
                                    {{#if equals projects.status "on-hold"}}
                                        <span class="rounded-4 px-2 py-1" style="color: #ff5722;background-color: #ffe0b2;">
                                            On-Hold
                                        </span>
                                    {{/if}}
                                </div>
                                <div class="members">
                                    <a href="/projects/detail/{{projects._id}}/members" class="on-hover">
                                        <span class="rounded-4 px-2 py-1" style="color: #ffc14d;background-color: #ffeccb;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-eye" viewBox="0 0 16 20">
                                                <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8M1.173 8a13 13 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5s3.879 1.168 5.168 2.457A13 13 0 0 1 14.828 8q-.086.13-.195.288c-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5s-3.879-1.168-5.168-2.457A13 13 0 0 1 1.172 8z"/>
                                                <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5M4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0"/>
                                            </svg>
                                            {{projects.members.length}} Member
                                        </span>
                                    </a>
                                </div>
                            </div>
                            <div class="d-flex justify-content-end flex-wrap gap-2 mt-2 pt-1 mb-2">
                                <div class="time">
                                    <span class="rounded-3 px-2 py-1" style="color: #6cc2ff;background-color: #d1edff;max-width: fit-content;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" fill="black" class="bi bi-play-fill" viewBox="0 0 18 20">
                                            <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393"/>
                                        </svg>
                                        {{formatHRDateShort projects.tanggal_mulai}}
                                    </span>
                                </div>
                                <div class="time">
                                    <span class="rounded-3 px-2 py-1" style="color: #6cc2ff;background-color: #d1edff; max-width: fit-content;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-alarm" viewBox="0 0 20 20">
                                            <path d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9z"/>
                                            <path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1zm1.038 3.018a6 6 0 0 1 .924 0 6 6 0 1 1-.924 0M0 3.5c0 .753.333 1.429.86 1.887A8.04 8.04 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5M13.5 1c-.753 0-1.429.333-1.887.86a8.04 8.04 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1"/>
                                        </svg>
                                        {{formatHRDateShort projects.tanggal_selesai}}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="description-content mt-1">
                        <label class="text-secondary text-desc fw-normal">{{toHTML projects.deskripsi}}</label>
                    </div>
                    <hr class="mt-1 mb-2" style="border: 1px solid lightgray;">
                    <div class="d-flex flex-wrap {{#if equals filterMode '1'}} justify-content-end {{else}} justify-content-between {{/if}} mb-2">
                        {{#if equals filterMode '2'}}
                            <div class="my-auto py-auto align-middle">
                                <label class="fs-6 fw-bold pt-1">
                                    Filter
                                </label>
                            </div>
                        {{/if}}
                        <div class="d-flex flex-wrap justify-content-end gap-2 mt-2 my-auto">
                            <button class="btn btn-sm btn-primary btn-filter" type="button">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel-fill" viewBox="0 0 16 16">
                                    <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5z"/>
                                </svg>
                            </button>
    
                            <div class="my-auto">
                                <a href="/tasks/create/{{projects._id}}" class="btn btn-sm btn-primary">+ Tambah Tugas</a>
                            </div>
                        </div>
                    </div>
                    {{#if equals filterMode '2'}}
                        <div class="d-flex flex-wrap gap-2 mt-2 mb-2">
                            <select id="input_type" class="form-select filter">
                                <option value="nama_task">Nama Tugas</option>
                                <option value="priority">Tingkat Prioritas</option>
                                <option value="deadline">Tenggat Waktu (Sisa Hari)</option>
                            </select>
                            <input type="text" id="input_data" class="form-control filter" placeholder="Cari Tugas" />
                        </div>
                    {{/if}}
                </div>
                <!-- Content -->
                <div class="containerContent">
                    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 mt-1">
                        {{#each task in tasks}}
                            <div class="col mb-3">
                                <div class="task-card" style="box-shadow: rgba(0, 0, 0, 0.09) 0px 3px 12px; display: flex; flex-direction: column; justify-content: space-between;">
                                    <div class="taskContent">
                                        <div class="row row-cols-2">
                                            <div class="col">
                                                <h5 class="fw-bold w-100 overflow-hidden text-overflow-ellipsis no-wrap content-title">{{task.nama_task}}</h5>
                                                <p class="text-secondary fw-light limited-text word-break content-desc mb-0">
                                                    {{toHTML task.deskripsi}}
                                                </p>
                                            </div>
                                            <div class="col d-flex flex-column flex-wrap align-items-end">
                                                <div class="status">
                                                    {{#if equals task.priority "high"}}
                                                        <span class="rounded-4 px-2 py-1" style="color: #f2709c;background-color: #fde2e4;">
                                                            {{capitalizeWord task.priority}}
                                                        </span>
                                                    {{/if}}
                                                    {{#if equals task.priority "mid"}}
                                                        <span class="rounded-4 px-2 py-1" style="color: #4c90d1;background-color: #c8e2f4;">
                                                            {{capitalizeWord task.priority}}
                                                        </span>
                                                    {{/if}}
                                                    {{#if equals task.priority "low"}}
                                                        <span class="rounded-4 px-2 py-1" style="color: #79c879;background-color: #e5f2e5;">
                                                            {{capitalizeWord task.priority}}
                                                        </span>
                                                    {{/if}}
                                                </div>
                                                <div class="members mt-2">
                                                    <span class="rounded-4 px-2 py-1" style="color: #ffc14d;background-color: #ffeccb;">
                                                        {{task.members.length}} Member
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-between mt-2" style="position: relative; bottom: 0;">
                                        <div class="d-flex my-auto gap-1">
                                            <div class="deadline">
                                                <span class="rounded-3 px-2 py-1" style="color: #6cc2ff;background-color: #d1edff; max-width: fit-content;">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="black" class="bi bi-alarm" viewBox="0 0 20 20">
                                                        <path d="M8.5 5.5a.5.5 0 0 0-1 0v3.362l-1.429 2.38a.5.5 0 1 0 .858.515l1.5-2.5A.5.5 0 0 0 8.5 9z"/>
                                                        <path d="M6.5 0a.5.5 0 0 0 0 1H7v1.07a7.001 7.001 0 0 0-3.273 12.474l-.602.602a.5.5 0 0 0 .707.708l.746-.746A6.97 6.97 0 0 0 8 16a6.97 6.97 0 0 0 3.422-.892l.746.746a.5.5 0 0 0 .707-.708l-.601-.602A7.001 7.001 0 0 0 9 2.07V1h.5a.5.5 0 0 0 0-1zm1.038 3.018a6 6 0 0 1 .924 0 6 6 0 1 1-.924 0M0 3.5c0 .753.333 1.429.86 1.887A8.04 8.04 0 0 1 4.387 1.86 2.5 2.5 0 0 0 0 3.5M13.5 1c-.753 0-1.429.333-1.887.86a8.04 8.04 0 0 1 3.527 3.527A2.5 2.5 0 0 0 13.5 1"/>
                                                    </svg>
                                                    <b>Dalam {{daysDifference task.deadline}} hari</b> / {{formatHRDateShort task.deadline}}
                                                </span>
                                            </div>
                                        </div>
                                        <a href="/tasks/detail/{{task._id}}">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="black" class="bi bi-arrow-right-circle-fill" viewBox="0 0 16 16">
                                                <path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        {{/each}}
                    </div>
                </div>
            </div>
        </div> 
    </div>

    <style>
        .mobile-div{
            display: none;
        }

        .desktop-div{
            display: block;
        }

        .isiPersonalData>table>tr>td:nth-child(1) {
            width: 150px;
        }

        .box {
            width: 100%;
            height: 85vh;
            display: flex;
            margin: auto;
            border-radius: 15px;
            background-color: white;
            box-shadow:  25px 25px 40px #a6a6a6,
             -25px -25px 40px #ffffff;
            font-family:system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            border: 1px solid rgb(189, 189, 189);
        }

        .sidebar {
            width: 100%;
            height: 100%;
            flex: 1;
            border-right: 1px solid black;
        }

        .content {
            width: 100%;
            height: 100%;
            flex: 4;
            display: flex;
            flex-direction: column;
            border-radius: 15px 15px 0px 0px;
        }

        .bagianAvatar {
            width: 100%;
            height: 250px;
        }

        .bagianItems>ul {
            margin: 0;
            padding: 0;
        }

        .bagianItems>ul>li {
            list-style-type: none;
            /* border: 1px solid black; */
            border: none;
            padding: 5px;
            margin: 5px;
        }

        .active>i {
            color: blue;
        }

        .active {
            font-weight: bold;
            background-color: beige;
            border-radius: 10px;
        }

        .contentAtas {
            padding-left: 1rem;
            padding-top: 1rem;
            padding-right: 1rem;
            padding-bottom: 0.1rem;
            border-radius: 15px 15px 0px 0px;
            background-color: white;
        }

        .contentAtas>ul {
            margin: 0;
            padding: 0;
        }

        .contentAtas>ul>li {
            list-style-type: none;
            display: inline;
            margin-right: 15px;
        }

        .contentBawah {
            height: 100%;
            background-color: white;
            padding: 1rem;
            overflow: auto;
            flex: 1;
        }

        .contentBawah-1 {
            height: auto;
            background-color: white;
            padding: 1rem;
            overflow: auto;
            flex: 1;
        }

        .containerContent {
            width: 100%;
            height: auto;
            overflow-y: auto;
            background-color: #EFEFEF;
            border-radius: 0px 0px 15px 15px;
            flex: 1;
            padding: 1rem;
        }

        .task-card{
            width: 100%;
            height: 98%;
            background-color: white;
            border-radius: 15px;
            padding: 1.2rem;
        }

        .limited-text {
            max-width: 98%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .on-hover:hover{
            opacity: 0.7;
        }

        .personalData {
            width: 100%;
            height: 100%;
            background-color: white;
        }

        .tulisanPersonalData {
            width: 20vw;
            height: 100%;
            background-color: white;
        }

        @media (max-width: 1040px) {
            .desktop-div {
                display: none;
            }
            .mobile-div {
                display: block;
            }
            .box {
                flex-direction: column;
                height: auto;
            }
            .left-header-content, 
            .right-header-content {
                width: 50% !important;
            }
            .time{
                font-size: 11pt !important;
            }
            .text-title{
                font-size: 24pt;
            }
            .text-desc{
                font-size: 12pt;
            }
            .status,
            .members{
                font-size: 10pt;
                width: fit-content;
            }
            .container-label{
                justify-content: flex-end;
            }
            .deadline{
                font-size: 11pt;
            }
        }

        @media (max-width: 768px) {
            .box {
                flex-direction: column;
                height: auto;
            }

            .sidebar {
                border-right: none;
            }

            .content {
                flex: none;
            }

            .contentAtas,
            .contentBawah,
            .contentBawah-1 {
                height: auto;
            }

            .bagianAvatar {
                height: auto;
            }

            .bagianItems {
                display: none; /* Hide the sidebar items on small screens */
            }

            .tulisanPersonalData {
                width: 100%;
            }
            .text-title{
                font-size: 24pt;
            }
            .text-desc{
                font-size: 12pt;
            }
            .time{
                font-size: 10pt !important;
            }
            .status,
            .members{
                font-size: 10pt;
                width: fit-content;
            }
            .container-label{
                justify-content: flex-end;
            }
            .content-title{
                font-size: 15pt;
            }
            .content-desc{
                font-size: 12pt;
            }
            .deadline{
                font-size: 11pt;
            }
        }

        @media only screen and (max-width: 600px) {
            .desktop-div {
                display: none;
            }
            .mobile-div {
                display: block;
            }
            .box {
                flex-direction: column;
                height: auto;
            }
            .left-header-content, 
            .right-header-content {
                width: 50% !important;
            }
            .deadline{
                font-size: 9pt !important;
            }
            .text-title{
                font-size: 18pt;
            }
            .text-desc{
                font-size: 9pt;
            }
            .time{
                font-size: 8pt !important;
            }
            .status,
            .members{
                font-size: 8pt;
                width: fit-content;
            }
            .container-label{
                flex-direction: column;
            }
            .content-title{
                font-size: 12pt;
            }
            .content-desc{
                font-size: 11pt;
            }
        }
    </style>

    <style scoped>
        html,
        body {
            background-color: #F1F4F7;
            height: 100%;
            width: 100%;
        }
    </style>
</template>

<template name="projects_members">
    <div class="container mt-3">
        <label style="color: blue; margin: 0;"> 
            <a href="/projects" class="text-secondary">
                Proyek
            </a> 
            / 
            <a href="/projects/detail/{{projects._id}}" class="text-secondary">
                {{projects.nama_project}}
            </a>
            / 
            <a href="/projects/detail/{{projects._id}}/members">
                Member
            </a>
        </label>
        <div class="mt-3">
            <div class="d-flex justify-content-between">
                <h1>{{projects.nama_project}} Member</h1>
                <div class="my-auto">
                    <button class="btn btn-sm btn-primary btn-filter" type="button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-funnel-fill" viewBox="0 0 16 16">
                            <path d="M1.5 1.5A.5.5 0 0 1 2 1h12a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.128.334L10 8.692V13.5a.5.5 0 0 1-.342.474l-3 1A.5.5 0 0 1 6 14.5V8.692L1.628 3.834A.5.5 0 0 1 1.5 3.5z"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="mt-2 mb-3">
                {{#if equals filterMode '2'}}
                    <hr class="mt-1 mb-2" style="border: 1px solid lightgray;">
                    <div class="my-auto py-auto align-middle">
                        <label class="fs-5 fw-bold">
                            Filter
                        </label>
                    </div>
                {{/if}}
                {{#if equals filterMode '2'}}
                    <div class="d-flex gap-2 mb-2">
                        <select id="input_type" class="form-select filter">
                            <option value="full_name">Nama Member</option>
                            <option value="job_position">Jabatan</option>
                            <option value="start_date">Tahun Masuk</option>
                            <option value="masa_jabatan">Masa Jabatan (Tahun)</option>
                            <option value="department_unit">Departement</option>
                        </select>
                        <input type="text" id="input_data" class="form-control filter" placeholder="Cari Member" />
                    </div>
                {{/if}}
            </div>
        </div>
        <div class="d-lg-block table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">No</th>
                        <th scope="col">Nama</th>
                        <th scope="col">Jabatan</th>
                        <th scope="col">Tahun Masuk</th>
                        <th scope="col">Departement</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each item in employees}}
                        <tr>
                            <td> {{nomorUrut @index}}</td>
                            <td> {{item.name}} </td>
                            <td> {{item.job_position}} </td>
                            <td> {{formatHRDate item.start_date}} </td>
                            <td> {{item.department_unit}} </td>
                        </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</template>